import{d as S,r as i,b as T,e as k,c as o,f as e,g as r,F as x,i as M,k as b,t as u,l as B,h as p,v as g,o as n,_ as q}from"./index-CWnjLkSX.js";const F={class:"grammar-view"},I={class:"grammar-list"},$=["onClick"],j={class:"created-at"},z={class:"modal-content"},H={key:0},J={key:1},K={key:0,class:"modal-content"},O={class:"form-group"},P={class:"form-group"},Q={class:"form-group"},R={class:"form-group"},W=S({__name:"GrammarView",setup(X){const f=i([]);T(async()=>{await c()});const c=async()=>{f.value=await k.grammars.orderBy("createdAt").reverse().toArray()},y=i(!1),s=i(null),d=i(!1),l=i(null),E=C=>{const t=f.value.find(m=>m.id===C)||null;s.value=t,y.value=!0},v=()=>{y.value=!1,s.value=null},U=()=>{s.value&&(l.value={...s.value},d.value=!0)},L=async()=>{l.value&&l.value.id!==void 0&&(await k.grammars.put({...l.value,createdAt:l.value.createdAt||new Date}),await c(),d.value=!1,v())},w=()=>{d.value=!1,l.value=null},N=async()=>{s.value&&s.value.id!==void 0&&(await k.grammars.delete(s.value.id),await c(),v(),console.log("删除语法",s.value))};return(C,t)=>{var m,G,V,D,_;return n(),o(x,null,[e("div",F,[t[5]||(t[5]=e("h1",null,"日语语法学习",-1)),e("div",I,[(n(!0),o(x,null,M(f.value,a=>(n(),o("div",{key:a.id,class:"grammar-item",onClick:A=>a.id?E(a.id):null},[e("h3",null,"原文: "+u(a.grammar),1),e("p",null,"含义: "+u(a.meaning),1),e("p",j,u(a.createdAt?new Date(a.createdAt).toLocaleDateString():""),1)],8,$))),128))])]),y.value?(n(),o("div",{key:0,class:"modal-overlay",onClick:b(v,["self"])},[e("div",z,[e("h2",null,"原文: "+u((m=s.value)==null?void 0:m.grammar),1),e("p",null,[t[6]||(t[6]=e("strong",null,"含义:",-1)),B(" "+u((G=s.value)==null?void 0:G.meaning),1)]),(V=s.value)!=null&&V.usage?(n(),o("p",H,[t[7]||(t[7]=e("strong",null,"用法:",-1)),B(" "+u((D=s.value)==null?void 0:D.usage),1)])):r("",!0),(_=s.value)!=null&&_.example&&typeof s.value.example=="string"?(n(),o("div",J,[t[8]||(t[8]=e("strong",null,"例句:",-1)),e("ul",null,[(n(!0),o(x,null,M((s.value.example||"").split(`
`),(a,A)=>(n(),o("li",{key:A},u(a),1))),128))])])):r("",!0),e("div",{class:"modal-actions"},[e("button",{onClick:U},"编辑"),e("button",{onClick:N},"删除"),e("button",{onClick:v},"关闭")])])])):r("",!0),d.value?(n(),o("div",{key:1,class:"modal-overlay",onClick:b(w,["self"])},[l.value?(n(),o("div",K,[t[14]||(t[14]=e("h2",null,"编辑语法",-1)),e("form",{onSubmit:b(L,["prevent"])},[e("div",O,[t[9]||(t[9]=e("label",{for:"edit-pattern"},"语法模式:",-1)),p(e("input",{type:"text",id:"edit-pattern","onUpdate:modelValue":t[0]||(t[0]=a=>l.value.grammar=a),required:""},null,512),[[g,l.value.grammar]])]),e("div",P,[t[10]||(t[10]=e("label",{for:"edit-meaning"},"含义:",-1)),p(e("input",{type:"text",id:"edit-meaning","onUpdate:modelValue":t[1]||(t[1]=a=>l.value.meaning=a),required:""},null,512),[[g,l.value.meaning]])]),e("div",Q,[t[11]||(t[11]=e("label",{for:"edit-usage"},"用法:",-1)),p(e("textarea",{id:"edit-usage","onUpdate:modelValue":t[2]||(t[2]=a=>l.value.usage=a)},null,512),[[g,l.value.usage]])]),e("div",R,[t[12]||(t[12]=e("label",{for:"edit-examples"},"例句 (每行一个):",-1)),p(e("textarea",{id:"edit-examples","onUpdate:modelValue":t[3]||(t[3]=a=>l.value.example=a),onInput:t[4]||(t[4]=a=>l.value&&(l.value.example=a.target.value))},null,544),[[g,l.value.example]])]),e("div",{class:"modal-actions"},[t[13]||(t[13]=e("button",{type:"submit"},"保存",-1)),e("button",{type:"button",onClick:w},"取消")])],32)])):r("",!0)])):r("",!0)],64)}}}),Z=q(W,[["__scopeId","data-v-2d80bd18"]]);export{Z as default};
